<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ñ‡πà‡∏ß‡∏á‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÅ‡∏ö‡∏ö‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background-color: #f8f9fa; }
        .container { background-color: #fff; padding: 30px; border-radius: 10px; max-width: 600px; margin: auto; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); }
        h2 { color: #007bff; text-align: center; margin-bottom: 25px; }
        label { display: block; margin-top: 15px; font-weight: bold; color: #343a40; }
        input[type="number"] {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 16px;
        }
        .input-group { display: flex; align-items: center; }
        .input-group input { flex-grow: 1; }
        .unit { margin-left: 10px; font-weight: normal; color: #6c757d; width: 40px; text-align: left; }
        button { background-color: #28a745; color: white; padding: 12px 15px; border: none; border-radius: 5px; cursor: pointer; width: 100%; margin-top: 30px; font-size: 18px; transition: background-color 0.3s; }
        button:hover { background-color: #1e7e34; }
        .result { margin-top: 25px; padding: 20px; border: 3px solid #007bff; border-radius: 8px; background-color: #eaf5ff; font-size: 1.2em; text-align: center; }
        .error { border-color: #dc3545 !important; background-color: #f8d7da !important; color: #dc3545; }
    </style>
</head>
<body>

<div class="container">
    <h2>üéØ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ñ‡πà‡∏ß‡∏á‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (‡∏´‡∏≤ R2)</h2>
    <p style="text-align: center; color: #6c757d;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏¢‡∏≠‡∏î‡∏Å‡∏π‡πâ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏µ‡πà‡∏ó‡∏£‡∏≤‡∏ö ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏´‡∏≤‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ó‡∏µ‡πà 2 ($R_2$)</p>

    <label for="p1">‡∏¢‡∏≠‡∏î‡∏Å‡∏π‡πâ ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ó‡∏µ‡πà 1 (P1):</label>
    <div class="input-group">
        <input type="number" id="p1" value="100000" min="0">
        <span class="unit">‡∏ö‡∏≤‡∏ó</span>
    </div>

    <label for="r1">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ó‡∏µ‡πà 1 (R1):</label>
    <div class="input-group">
        <input type="number" id="r1" value="25" min="0">
        <span class="unit">%</span>
    </div>

    <label for="p2">‡∏¢‡∏≠‡∏î‡∏Å‡∏π‡πâ ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ó‡∏µ‡πà 2 (P2):</label>
    <div class="input-group">
        <input type="number" id="p2" value="20000" min="0">
        <span class="unit">‡∏ö‡∏≤‡∏ó</span>
    </div>

    <label for="r_avg">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (R_Avg):</label>
    <div class="input-group">
        <input type="number" id="r_avg" value="28" min="0">
        <span class="unit">%</span>
    </div>

    <button onclick="calculateDynamicRate()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏´‡∏≤ ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ó‡∏µ‡πà 2 (R2)</button>

    <div class="result" id="result">
        **‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: R2 ‡∏Ñ‡∏∑‡∏≠ ...**
    </div>
</div>

<script>
    function calculateDynamicRate() {
        // 1. ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
        const P1 = parseFloat(document.getElementById('p1').value);
        const R1_Percent = parseFloat(document.getElementById('r1').value);
        const P2 = parseFloat(document.getElementById('p2').value);
        const R_Avg_Percent = parseFloat(document.getElementById('r_avg').value);
        const resultDiv = document.getElementById('result');

        // 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        if (isNaN(P1) || isNaN(R1_Percent) || isNaN(P2) || isNaN(R_Avg_Percent) || P1 < 0 || R1_Percent < 0 || P2 < 0 || R_Avg_Percent < 0) {
            resultDiv.innerHTML = "‚ö†Ô∏è **‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ö‡∏ß‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏®‡∏π‡∏ô‡∏¢‡πå)**";
            resultDiv.classList.add('error');
            return;
        }

        if (P1 + P2 === 0) {
            resultDiv.innerHTML = "‚ö†Ô∏è **‡∏¢‡∏≠‡∏î‡∏Å‡∏π‡πâ‡∏£‡∏ß‡∏° (P1 + P2) ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏®‡∏π‡∏ô‡∏¢‡πå**";
            resultDiv.classList.add('error');
            return;
        }

        if (P2 === 0) {
            resultDiv.innerHTML = "‚ö†Ô∏è **‡∏´‡∏≤‡∏Å P2 ‡πÄ‡∏õ‡πá‡∏ô 0, R2 ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö R_Avg ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£**";
            // ‡πÉ‡∏ô‡∏ó‡∏≤‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ñ‡πâ‡∏≤ P2=0 ‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢‡∏®‡∏π‡∏ô‡∏¢‡πå‡πÉ‡∏ô‡∏™‡∏π‡∏ï‡∏£ R2
            // ‡πÅ‡∏ï‡πà‡∏ó‡∏≤‡∏á‡∏ï‡∏£‡∏£‡∏Å‡∏∞‡∏Ñ‡∏∑‡∏≠ R2 ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ R_Avg = R1
            const FinalR2 = R1_Percent;
            if (FinalR2 !== R_Avg_Percent) {
                resultDiv.innerHTML = `‚ö†Ô∏è **‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å P2 ‡πÄ‡∏õ‡πá‡∏ô 0** ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏à‡∏∂‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö **R1 (${R1_Percent.toFixed(2)}%)** ‡∏ã‡∏∂‡πà‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (${R_Avg_Percent.toFixed(2)}%)`;
            } else {
                 resultDiv.innerHTML = `‚úÖ **‡∏¢‡∏≠‡∏î‡∏Å‡∏π‡πâ P2 ‡πÄ‡∏õ‡πá‡∏ô 0: R2 ‡∏Ñ‡∏∑‡∏≠ ${FinalR2.toFixed(2)} %** (‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏£‡∏ß‡∏°‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö R1)`;
            }
            resultDiv.classList.remove('error');
            return;
        }


        // 3. ‡πÅ‡∏õ‡∏•‡∏á‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°
        const R1 = R1_Percent / 100;
        const R_Avg = R_Avg_Percent / 100;

        // 4. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
        const TotalInterestNeeded = R_Avg * (P1 + P2);

        // 5. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏™‡∏±‡∏ç‡∏ç‡∏≤ 1
        const InterestFromP1 = P1 * R1;

        // 6. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏™‡∏±‡∏ç‡∏ç‡∏≤ 2
        const InterestFromP2 = TotalInterestNeeded - InterestFromP1;

        // 7. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì R2 (‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°)
        const R2 = InterestFromP2 / P2;

        // 8. ‡πÅ‡∏õ‡∏•‡∏á R2 ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå
        const R2_Percent = R2 * 100;
        
        resultDiv.classList.remove('error');

        // 9. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
        if (R2_Percent < 0) {
            resultDiv.innerHTML = `‚ùå **R2 ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ‡∏Ñ‡∏∑‡∏≠ ${R2_Percent.toFixed(4)} %** (‡∏ï‡∏¥‡∏î‡∏•‡∏ö) <br><br> **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ï‡∏¥‡∏î‡∏•‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å **R1** ‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ **R_Avg** ‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≥‡∏•‡∏á`;
            resultDiv.classList.add('error');
        } else {
            resultDiv.innerHTML = `‚úÖ **‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ó‡∏µ‡πà 2 (R2) ‡∏Ñ‡∏∑‡∏≠: ${R2_Percent.toFixed(4)} %**`;
        }
    }

    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏£‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    window.onload = calculateDynamicRate;
</script>

</body>
</html>